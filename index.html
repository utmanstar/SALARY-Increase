<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salary Increase and Tax Calculator 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .header {
            background-color: #28a745; /* Green */
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 700px;
            margin: auto;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group select {
            width: calc(100% - 22px);
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border;
        }
        .form-group input::-webkit-outer-spin-button,
        .form-group input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .checkbox-group input {
            width: auto;
            margin-right: 10px;
        }
        .button-group {
            text-align: center;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .button-group button {
            background-color: #007bff;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .button-group button:hover {
            background-color: #0056b3;
        }
        .button-group button.clear-button {
            background-color: #dc3545;
        }
        .button-group button.clear-button:hover {
            background-color: #c82333;
        }
        .results {
            margin-top: 30px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        .results h3 {
            color: #28a745;
            margin-bottom: 15px;
        }
        .results p {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .results p strong {
            color: #007bff;
        }
        .tax-breakdown {
            margin-top: 20px;
            border-top: 1px dashed #ccc;
            padding-top: 15px;
        }
        .tax-breakdown h4 {
            color: #007bff;
            margin-bottom: 10px;
        }
        .tax-breakdown ul {
            list-style: none;
            padding: 0;
        }
        .tax-breakdown ul li {
            background-color: #f8f9fa;
            border: 1px solid #eee;
            padding: 8px 10px;
            margin-bottom: 5px;
            border-radius: 4px;
        }
        .footer {
            margin-top: 40px;
            text-align: center;
            color: #444;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            /* Added for scrolling text */
            overflow: hidden; /* Hide overflow content */
            white-space: nowrap; /* Prevent text from wrapping */
            position: relative; /* Needed for absolute positioning of text if desired, or just for context */
            padding: 10px 0; /* Add some padding to footer */
        }
        .footer img {
            height: 60px; /* Increased logo size */
        }

        /* Styles for the sliding credits */
        .sliding-text-container {
            width: 100%; /* Ensure container takes full width of footer */
            overflow: hidden; /* Hide anything outside this container */
            position: relative;
        }

        .sliding-credits {
            display: inline-block; /* Essential for animation */
            padding-left: 100%; /* Start the text off-screen to the right */
            animation: slide-left 20s linear infinite; /* Adjust duration as needed */
        }

        @keyframes slide-left {
            0% {
                transform: translateX(0%); /* Start at the initial padding-left (effectively right of container) */
            }
            100% {
                transform: translateX(-200%); /* Move text completely off-screen to the left (adjust if text is very long) */
            }
        }
        /* Optional: Pause animation on hover */
        .sliding-credits:hover {
            animation-play-state: paused;
        }
    </style>
</head>
<body onload="loadSavedData()">
    <div class="header">
        <h1>Salary Increase and Tax Calculator 2025</h1>
    </div>

    <div class="container">
        <h2>Enter Your Salary Details</h2>
        <div class="form-group">
            <label for="grossSalary">Gross Monthly Salary (Rs.):</label>
            <input type="number" id="grossSalary" placeholder="e.g., 150000" required onkeyup="saveInput('grossSalary')">
        </div>
        <div class="form-group">
            <label for="basicSalary">Basic Monthly Salary (Rs.):</label>
            <input type="number" id="basicSalary" placeholder="e.g., 100000" required onkeyup="saveInput('basicSalary')">
        </div>
        <div class="form-group">
            <label for="payScale">Pay Scale:</label>
            <select id="payScale" required onchange="saveInput('payScale')">
                <option value="">Select Pay Scale</option>
                <script>
                    for (let i = 1; i <= 22; i++) {
                        document.write(`<option value="${i}">${i}</option>`);
                    }
                </script>
            </select>
        </div>
        <div class="checkbox-group">
            <input type="checkbox" id="isTeacher" onchange="saveInput('isTeacher')">
            <label for="isTeacher">Are you a Teacher or Researcher?</label>
        </div>

        <div class="button-group">
            <button onclick="calculate()">Calculate</button>
            <button class="clear-button" onclick="clearAll()">Clear</button>
        </div>

        <div class="results" id="results">
            </div>
    </div>

    <div class="footer">
        <div class="sliding-text-container">
            <span class="sliding-credits">Designed by "KHURRAM IRSHAD KHAN SST(IT) GHS Sector No. 2, KTS Haripur"</span>
        </div>
        <img src="ghs2.png" alt="GHS2 Logo">
    </div>

    <script>
        // Function to save input to local storage
        function saveInput(id) {
            const element = document.getElementById(id);
            if (element.type === 'checkbox') {
                localStorage.setItem(id, element.checked);
            } else {
                localStorage.setItem(id, element.value);
            }
        }

        // Function to load saved data from local storage
        function loadSavedData() {
            const grossSalary = localStorage.getItem('grossSalary');
            const basicSalary = localStorage.getItem('basicSalary');
            const payScale = localStorage.getItem('payScale');
            const isTeacher = localStorage.getItem('isTeacher');

            if (grossSalary) document.getElementById('grossSalary').value = grossSalary;
            if (basicSalary) document.getElementById('basicSalary').value = basicSalary;
            if (payScale) document.getElementById('payScale').value = payScale;
            if (isTeacher !== null) document.getElementById('isTeacher').checked = (isTeacher === 'true');
        }

        // Function to clear all inputs and results
        function clearAll() {
            document.getElementById('grossSalary').value = '';
            document.getElementById('basicSalary').value = '';
            document.getElementById('payScale').value = '';
            document.getElementById('isTeacher').checked = false;
            document.getElementById('results').innerHTML = '';
            localStorage.clear(); // Clear all saved data
        }


        function calculate() {
            const grossSalaryInput = document.getElementById('grossSalary');
            const basicSalaryInput = document.getElementById('basicSalary');
            const payScaleInput = document.getElementById('payScale');
            const isTeacherCheckbox = document.getElementById('isTeacher');
            const resultsDiv = document.getElementById('results');

            const grossSalary = parseFloat(grossSalaryInput.value);
            const basicSalary = parseFloat(basicSalaryInput.value);
            const payScale = parseInt(payScaleInput.value);
            const isTeacher = isTeacherCheckbox.checked;

            if (isNaN(grossSalary) || isNaN(basicSalary) || isNaN(payScale)) {
                resultsDiv.innerHTML = '<p style="color: red;">Please enter valid numeric values for all fields.</p>';
                return;
            }

            let incrementPercentage = 0;
            let draPercentage = 0;
            let salaryIncrease = 0;

            if (payScale >= 1 && payScale <= 16) {
                incrementPercentage = 0.10; // 10% Increment
                draPercentage = 0.30; // 30% DRA
                salaryIncrease = (incrementPercentage + draPercentage) * basicSalary; // 40% of basic salary
            } else if (payScale >= 17 && payScale <= 22) {
                incrementPercentage = 0.10; // 10% Increment
                draPercentage = 0.15; // 15% DRA
                salaryIncrease = (incrementPercentage + draPercentage) * basicSalary; // 25% of basic salary
            } else {
                resultsDiv.innerHTML = '<p style="color: red;">Invalid Pay Scale. Please select a scale between 1 and 22.</p>';
                return;
            }

            const newGrossSalary = grossSalary + salaryIncrease;

            // Monthly Tax Calculation (before rebate) and breakdown
            let monthlyTaxBeforeRebate = 0;
            let taxBreakdownHtml = '<h4>Monthly Tax Breakdown:</h4><ul>';

            // Fixed tax calculations for breakdown (based on the original image values)
            if (newGrossSalary > 50000) {
                let incomeInThisSlab;
                let taxForThisSlab;

                // Slab 1: 50,001 - 100,000 (1%)
                incomeInThisSlab = Math.max(0, Math.min(newGrossSalary, 100000) - 50000);
                taxForThisSlab = incomeInThisSlab * 0.01;
                monthlyTaxBeforeRebate += taxForThisSlab;
                if (incomeInThisSlab > 0) taxBreakdownHtml += `<li>Income Rs.${Math.round(incomeInThisSlab).toLocaleString()} @ 1%: Rs.${Math.round(taxForThisSlab).toLocaleString()} (Cumulative: Rs.${Math.round(monthlyTaxBeforeRebate).toLocaleString()})</li>`;

                // Slab 2: 100,001 - 183,333 (Rs500 + 11%)
                if (newGrossSalary > 100000) {
                    const baseTaxForSlab = 500;
                    incomeInThisSlab = Math.max(0, Math.min(newGrossSalary, 183333) - 100000);
                    taxForThisSlab = baseTaxForSlab + (incomeInThisSlab * 0.11);
                    monthlyTaxBeforeRebate = 500 + (Math.min(newGrossSalary, 183333) - 100000) * 0.11; // Recalculate to match fixed slab values
                    if (incomeInThisSlab > 0) taxBreakdownHtml += `<li>Base Tax Rs.${Math.round(baseTaxForSlab).toLocaleString()} + Income Rs.${Math.round(incomeInThisSlab).toLocaleString()} @ 11%: Rs.${Math.round(taxForThisSlab).toLocaleString()} (Cumulative: Rs.${Math.round(monthlyTaxBeforeRebate).toLocaleString()})</li>`;
                }

                // Slab 3: 183,334 - 266,667 (Rs9,677 + 23%)
                if (newGrossSalary > 183333) {
                    const baseTaxForSlab = 9677;
                    incomeInThisSlab = Math.max(0, Math.min(newGrossSalary, 266667) - 183333);
                    taxForThisSlab = baseTaxForSlab + (incomeInThisSlab * 0.23);
                    monthlyTaxBeforeRebate = 9677 + (Math.min(newGrossSalary, 266667) - 183333) * 0.23; // Recalculate to match fixed slab values
                    if (incomeInThisSlab > 0) taxBreakdownHtml += `<li>Base Tax Rs.${Math.round(baseTaxForSlab).toLocaleString()} + Income Rs.${Math.round(incomeInThisSlab).toLocaleString()} @ 23%: Rs.${Math.round(taxForThisSlab).toLocaleString()} (Cumulative: Rs.${Math.round(monthlyTaxBeforeRebate).toLocaleString()})</li>`;
                }

                // Slab 4: 266,668 - 341,667 (Rs28,833 + 30%)
                if (newGrossSalary > 266667) {
                    const baseTaxForSlab = 28833;
                    incomeInThisSlab = Math.max(0, Math.min(newGrossSalary, 341667) - 266667);
                    taxForThisSlab = baseTaxForSlab + (incomeInThisSlab * 0.30);
                    monthlyTaxBeforeRebate = 28833 + (Math.min(newGrossSalary, 341667) - 266667) * 0.30; // Recalculate
                    if (incomeInThisSlab > 0) taxBreakdownHtml += `<li>Base Tax Rs.${Math.round(baseTaxForSlab).toLocaleString()} + Income Rs.${Math.round(incomeInThisSlab).toLocaleString()} @ 30%: Rs.${Math.round(taxForThisSlab).toLocaleString()} (Cumulative: Rs.${Math.round(monthlyTaxBeforeRebate).toLocaleString()})</li>`;
                }

                // Slab 5: 341,668 and above (Rs51,333 + 35%)
                if (newGrossSalary > 341667) {
                    const baseTaxForSlab = 51333;
                    incomeInThisSlab = Math.max(0, newGrossSalary - 341667);
                    taxForThisSlab = baseTaxForSlab + (incomeInThisSlab * 0.35);
                    monthlyTaxBeforeRebate = 51333 + (newGrossSalary - 341667) * 0.35; // Recalculate
                    if (incomeInThisSlab > 0) taxBreakdownHtml += `<li>Base Tax Rs.${Math.round(baseTaxForSlab).toLocaleString()} + Income Rs.${Math.round(incomeInThisSlab).toLocaleString()} @ 35%: Rs.${Math.round(taxForThisSlab).toLocaleString()} (Cumulative: Rs.${Math.round(monthlyTaxBeforeRebate).toLocaleString()})</li>`;
                }
            } else {
                taxBreakdownHtml += `<li>Income Rs.${Math.round(newGrossSalary).toLocaleString()} is below taxable limit (Rs.50,000). No tax.</li>`;
            }
            taxBreakdownHtml += '</ul>';


            let finalMonthlyTax = monthlyTaxBeforeRebate;
            let teacherRebateAmount = 0;

            if (isTeacher) {
                teacherRebateAmount = 0.25 * monthlyTaxBeforeRebate; // 25% rebate
                finalMonthlyTax = monthlyTaxBeforeRebate - teacherRebateAmount;
                if (finalMonthlyTax < 0) finalMonthlyTax = 0; // Ensure tax doesn't go negative
            }

            const finalYearlyTax = finalMonthlyTax * 12;

            // Calculate and display increment components
            const incrementAmount = basicSalary * incrementPercentage;
            const draAmount = basicSalary * draPercentage;


            // Use Math.round() for all monetary figures before displaying
            let resultsHtml = `
                <h3>Calculation Results:</h3>
                <p>Increment (10%): <strong>Rs. ${Math.round(incrementAmount).toLocaleString()}</strong></p>
                <p>DRA (${Math.round(draPercentage * 100)}%): <strong>Rs. ${Math.round(draAmount).toLocaleString()}</strong></p>
                <p>Total Salary Increase: <strong>Rs. ${Math.round(salaryIncrease).toLocaleString()}</strong></p>
                <p>New Gross Monthly Salary: <strong>Rs. ${Math.round(newGrossSalary).toLocaleString()}</strong></p>
                <p>Monthly Tax Deduction (Before Rebate): <strong>Rs. ${Math.round(monthlyTaxBeforeRebate).toLocaleString()}</strong></p>
            `;

            if (isTeacher) {
                resultsHtml += `
                    <p style="color: green;">Teacher's/Researcher's Tax Rebate (25%): <strong>Rs. ${Math.round(teacherRebateAmount).toLocaleString()}</strong></p>
                    <p><strong>New Monthly Tax for Teacher/Researcher:</strong> <strong>Rs. ${Math.round(finalMonthlyTax).toLocaleString()}</strong></p>
                    <p><strong>New Yearly Tax for Teacher/Researcher:</strong> <strong>Rs. ${Math.round(finalYearlyTax).toLocaleString()}</strong></p>
                `;
            } else {
                resultsHtml += `
                    <p>Monthly Tax Deduction: <strong>Rs. ${Math.round(finalMonthlyTax).toLocaleString()}</strong></p>
                    <p>Yearly Tax Deduction: <strong>Rs. ${Math.round(finalYearlyTax).toLocaleString()}</strong></p>
                `;
            }

            // Append tax breakdown
            resultsHtml += `<div class="tax-breakdown">${taxBreakdownHtml}</div>`;

            resultsDiv.innerHTML = resultsHtml;
        }
    </script>
</body>
</html>
